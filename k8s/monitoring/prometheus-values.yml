# Helm values for kube-prometheus-stack
# Install: helm install prometheus prometheus-community/kube-prometheus-stack -n monitoring --create-namespace -f prometheus-values.yml

prometheus:
  prometheusSpec:
    # Scrape LiteLLM metrics
    additionalScrapeConfigs:
      - job_name: litellm
        scrape_interval: 30s
        static_configs:
          - targets: ["litellm.ai-lab.svc.cluster.local:4000"]
        metrics_path: /metrics

    retention: 30d
    storageSpec:
      volumeClaimTemplate:
        spec:
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 20Gi

    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: "1"
        memory: 2Gi

grafana:
  enabled: true
  adminPassword: admin  # Change via secret in production
  ingress:
    enabled: true
    ingressClassName: nginx
    hosts:
      - grafana.gpu-lab.tail1234.ts.net  # Replace tail1234 with your tailnet

alertmanager:
  enabled: false  # Enable when you need alerts

# Minimize footprint for single-node
nodeExporter:
  enabled: true

kubeStateMetrics:
  enabled: true
